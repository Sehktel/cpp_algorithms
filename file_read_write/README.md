# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –§–∞–π–ª–æ–≤—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ –≤ C++

–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—Ç—É —Å —Ñ–∞–π–ª–∞–º–∏ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C++.

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è #1: –ë–∞–∑–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π I/O
**–§–∞–π–ª:** `01_basic_text_io.cpp`

**–ò–∑—É—á–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- `ifstream` –∏ `ofstream` - –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –ø–æ—Ç–æ–∫–æ–≤
- RAII (Resource Acquisition Is Initialization) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –ü–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `getline()`
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ `operator<<` –∏ `operator>>`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞ —á–µ—Ä–µ–∑ `is_open()`

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –í C++ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (–¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä)
- `getline()` –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ `operator>>` –¥–ª—è —á—Ç–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è #2: –ë–∏–Ω–∞—Ä–Ω—ã–π I/O
**–§–∞–π–ª:** `02_binary_io.cpp`

**–ò–∑—É—á–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- –†–µ–∂–∏–º `ios::binary` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ú–µ—Ç–æ–¥—ã `read()` –∏ `write()` - –Ω–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π I/O
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è POD (Plain Old Data) —Å—Ç—Ä—É–∫—Ç—É—Ä
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `seekg()` –∏ `seekp()`
- `tellg()` –∏ `tellp()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```cpp
–¢–µ–∫—Å—Ç–æ–≤—ã–π:  int 12345 ‚Üí "12345" (5 –±–∞–π—Ç + \n)
–ë–∏–Ω–∞—Ä–Ω—ã–π:   int 12345 ‚Üí 4 –±–∞–π—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é
```

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
‚ö†Ô∏è –ë–∏–Ω–∞—Ä–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è POD —Ç–∏–ø–æ–≤!
‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å—é (endianness, padding)
‚ö†Ô∏è –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Protocol Buffers, JSON –∏–ª–∏ Boost.Serialization

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è #3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–§–∞–π–ª:** `03_error_handling.cpp`

**–ò–∑—É—á–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- –§–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–∞: `goodbit`, `eofbit`, `failbit`, `badbit`
- –ú–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏: `good()`, `fail()`, `bad()`, `eof()`
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `clear()` –∏ `ignore()`
- –í–∫–ª—é—á–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ `exceptions()`
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```
iostate (–±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ goodbit ‚îÇ  eofbit  ‚îÇ  failbit  ‚îÇ  badbit  ‚îÇ
‚îÇ  (0x00) ‚îÇ  (0x01)  ‚îÇ  (0x02)   ‚îÇ  (0x04)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚úì         EOF      –õ–æ–≥–∏—á–µ—Å–∫–∞—è  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
   –í—Å—ë OK              –æ—à–∏–±–∫–∞      –æ—à–∏–±–∫–∞
```

**–§–∏–ª–æ—Å–æ—Ñ–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:**
- **–ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞** - —è–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** - —á–∏—Å—Ç—ã–π –∫–æ–¥, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ I/O

---

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è #4: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏
**–§–∞–π–ª:** `04_advanced_techniques.cpp`

**–ò–∑—É—á–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- –ú–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä—ã –ø–æ—Ç–æ–∫–æ–≤: `setw()`, `setprecision()`, `setfill()`, `fixed`, `hex`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `rdbuf()->pubsetbuf()`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
- CSV —Ñ–∞–π–ª—ã - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä
- –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

**–ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (100,000 —Å—Ç—Ä–æ–∫):**

| –ú–µ—Ç–æ–¥ | –í—Ä–µ–º—è | –û—Ü–µ–Ω–∫–∞ |
|-------|-------|--------|
| `endl` (—Å flush) | ~500-800 –º—Å | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ |
| `\n` (–±–µ–∑ flush) | ~100-150 –º—Å | ‚úì –•–æ—Ä–æ—à–æ |
| –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä | ~80-120 –º—Å | ‚úì‚úì –õ—É—á—à–µ |
| –ë–ª–æ—á–Ω–∞—è –∑–∞–ø–∏—Å—å | ~50-80 –º—Å | ‚úì‚úì‚úì –û—Ç–ª–∏—á–Ω–æ |

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:**
```cpp
// ‚ùå –ü–õ–û–•–û - flush –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏!
for (int i = 0; i < n; i++) {
    file << data << endl;
}

// ‚úì –•–û–†–û–®–û - flush —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ
for (int i = 0; i < n; i++) {
    file << data << "\n";
}
```

---

## üõ† –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫

### Windows (PowerShell)
```powershell
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
g++ -std=c++17 -Wall -Wextra -O2 01_basic_text_io.cpp -o 01_basic_text_io.exe

# –ó–∞–ø—É—Å–∫
.\01_basic_text_io.exe

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
Get-ChildItem *.cpp | ForEach-Object { 
    g++ -std=c++17 -Wall -Wextra -O2 $_.Name -o $_.BaseName
}
```

### Linux/macOS
```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
g++ -std=c++17 -Wall -Wextra -O2 01_basic_text_io.cpp -o 01_basic_text_io

# –ó–∞–ø—É—Å–∫
./01_basic_text_io

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö
for file in *.cpp; do
    g++ -std=c++17 -Wall -Wextra -O2 "$file" -o "${file%.cpp}"
done
```

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
```bash
# Clang —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
clang++ -std=c++20 -Wall -Wextra -Wpedantic -fsanitize=address,undefined \
        01_basic_text_io.cpp -o 01_basic_text_io

# MSVC (Windows)
cl /std:c++17 /W4 /EHsc 01_basic_text_io.cpp
```

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ C++ Stream I/O

```
                    ios_base
                       |
                      ios
                    /     \
                   /       \
              istream     ostream
               /   \       /   \
              /     \     /     \
         ifstream  iostream  ofstream
                      |
                   fstream
```

**–ò–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤:**
- `ios_base` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (—Ñ–ª–∞–≥–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- `ios` - –¥–æ–±–∞–≤–ª—è–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é
- `istream` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞
- `ostream` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∞
- `iostream` - –≤–≤–æ–¥ –∏ –≤—ã–≤–æ–¥
- `ifstream`, `ofstream`, `fstream` - —Ñ–∞–π–ª–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üéì –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã

### 1. –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è

–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é:

```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí C++ Stream Buffer ‚Üí Kernel Buffer ‚Üí Disk Cache ‚Üí –î–∏—Å–∫
   (8KB)           (8KB)              (4KB)         (vary)
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è?**
- –°–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤ (syscall) –¥–æ—Ä–æ–≥–æ–π: ~1-2 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã
- –ó–∞–ø–∏—Å—å 1 –±–∞–π—Ç–∞ –±–µ–∑ –±—É—Ñ–µ—Ä–∞ = 1 syscall
- –ó–∞–ø–∏—Å—å 1 –±–∞–π—Ç–∞ —Å –±—É—Ñ–µ—Ä–æ–º 8KB = 1 syscall –Ω–∞ 8000 –æ–ø–µ—Ä–∞—Ü–∏–π
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 1000+ —Ä–∞–∑!**

### 2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π vs –ù–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π I/O

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (—Ç–µ–∫—Å—Ç–æ–≤—ã–π):**
```cpp
int x = 42;
file << x;  // "42" - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ ASCII
```
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å, –æ—Ç–ª–∞–¥–∫–∞
- –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä, –ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è float

**–ù–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–±–∏–Ω–∞—Ä–Ω—ã–π):**
```cpp
int x = 42;
file.write(reinterpret_cast<char*>(&x), sizeof(x));  // 0x2A000000 (little-endian)
```
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: —Å–∫–æ—Ä–æ—Å—Ç—å, –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å, —Ç–æ—á–Ω–æ—Å—Ç—å
- –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –Ω–µ—á–∏—Ç–∞–µ–º—ã–π, –ø—Ä–æ–±–ª–µ–º—ã —Å endianness

### 3. –°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ `file << "Hello"`:

1. **User Space:** –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ C++ stream buffer
2. **Flush trigger:** –ë—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω / endl / close()
3. **System Call:** `write(fd, buffer, size)` - –ø–µ—Ä–µ—Ö–æ–¥ –≤ kernel mode
4. **Kernel:** –î–∞–Ω–Ω—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ kernel buffer
5. **Disk Scheduler:** –ó–∞–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å I/O
6. **Driver:** –§–∏–∑–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

**–°—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (user‚Üíkernel): ~1Œºs**

---

## üöÄ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices

### 1. RAII –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

```cpp
// ‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
{
    ofstream file("data.txt");
    file << "data";
    // file.close() –≤—ã–∑–æ–≤–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
}

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —É—Ç–µ—á–∫–∞ –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏
ofstream file("data.txt");
file << "data";
if (error) return;  // file –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è!
file.close();
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

```cpp
// –£—Ä–æ–≤–µ–Ω—å 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
ofstream file("data.txt");
if (!file) {
    cerr << "Error opening file\n";
    return;
}

// –£—Ä–æ–≤–µ–Ω—å 2: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
if (!file) {
    if (errno == EACCES) cerr << "Permission denied\n";
    else if (errno == ENOENT) cerr << "Directory not found\n";
    else cerr << "Unknown error: " << errno << "\n";
}

// –£—Ä–æ–≤–µ–Ω—å 3: –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π
file.exceptions(ofstream::failbit | ofstream::badbit);
try {
    file << data;
} catch (const ofstream::failure& e) {
    cerr << "Exception: " << e.what() << "\n";
}
```

### 3. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

```cpp
// ‚ùå –ü–ª–æ—Ö–æ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å
string content((istreambuf_iterator<char>(file)), 
                istreambuf_iterator<char>());

// ‚úì –•–æ—Ä–æ—à–æ - –ø–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
string line;
while (getline(file, line)) {
    process(line);  // O(1) –ø–∞–º—è—Ç—å
}

// ‚úì‚úì –õ—É—á—à–µ - –±–ª–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
const size_t CHUNK_SIZE = 1024 * 1024;  // 1MB
char buffer[CHUNK_SIZE];
while (file.read(buffer, CHUNK_SIZE) || file.gcount() > 0) {
    process(buffer, file.gcount());
}
```

---

## üî¨ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã (–¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è)

### 1. Memory-Mapped Files

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```cpp
// POSIX
int fd = open("file.dat", O_RDONLY);
void* addr = mmap(NULL, size, PROT_READ, MAP_PRIVATE, fd, 0);
// –†–∞–±–æ—Ç–∞–µ–º —Å addr –∫–∞–∫ —Å –æ–±—ã—á–Ω–æ–π –ø–∞–º—è—Ç—å—é
munmap(addr, size);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ read/write
- Kernel —É–ø—Ä–∞–≤–ª—è–µ—Ç paging –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** SQLite, RocksDB, MongoDB

### 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O

**Linux io_uring (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API):**
```cpp
io_uring ring;
io_uring_queue_init(QUEUE_DEPTH, &ring, 0);

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å—ã
io_uring_sqe* sqe = io_uring_get_sqe(&ring);
io_uring_prep_read(sqe, fd, buffer, size, offset);
io_uring_submit(&ring);

// –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è...

// –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
io_uring_cqe* cqe;
io_uring_wait_cqe(&ring, &cqe);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ I/O –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –ë–∞—Ç—á–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### 3. Zero-Copy —Ç–µ—Ö–Ω–∏–∫–∏

**sendfile() - –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ–∞–π–ª–æ–≤—ã–º–∏ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞–º–∏ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ user space:**

```cpp
// –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±: read ‚Üí user buffer ‚Üí write (2 –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
read(in_fd, buffer, size);
write(out_fd, buffer, size);

// Zero-copy: kernel –Ω–∞–ø—Ä—è–º—É—é –∫–æ–ø–∏—Ä—É–µ—Ç –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏
sendfile(out_fd, in_fd, &offset, size);  // 0 –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π –≤ user space!
```

---

## üìù –ó–∞–¥–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –£—Ä–æ–≤–µ–Ω—å 1: –ë–∞–∑–æ–≤—ã–π
1. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Å–ª–æ–≤, —Å—Ç—Ä–æ–∫ –∏ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ
2. –°–æ–∑–¥–∞–π—Ç–µ —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ CSV –≤ JSON
3. –ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–º–µ–Ω—ã —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–∞–π–ª–µ

### –£—Ä–æ–≤–µ–Ω—å 2: –°—Ä–µ–¥–Ω–∏–π
4. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—É—é –ë–î —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ (—Ñ–∞–π–ª –¥–∞–Ω–Ω—ã—Ö + –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ñ–∞–π–ª)
5. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º RLE (Run-Length Encoding)
6. –ù–∞–ø–∏—à–∏—Ç–µ –ª–æ–≥-–ø–∞—Ä—Å–µ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏–∑ –±–æ–ª—å—à–∏—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤

### –£—Ä–æ–≤–µ–Ω—å 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
7. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ (write-ahead log)
8. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–æ–≥ SQLite)
9. –ù–∞–ø–∏—à–∏—Ç–µ MapReduce –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ

---

## üîç –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –∞ –∫–æ–≥–¥–∞ –±–∏–Ω–∞—Ä–Ω—ã–µ?**

A: 
- **–¢–µ–∫—Å—Ç–æ–≤—ã–µ:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ª–æ–≥–∏, –¥–∞–Ω–Ω—ã–µ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞, –º–µ–∂–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –æ–±–º–µ–Ω
- **–ë–∏–Ω–∞—Ä–Ω—ã–µ:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞, –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã, —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**Q: –ü–æ—á–µ–º—É `endl` –º–µ–¥–ª–µ–Ω–Ω–µ–µ `\n`?**

A: `endl` = `\n` + `flush()`. Flush —Ñ–æ—Ä—Å–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –±—É—Ñ–µ—Ä–∞ –Ω–∞ –¥–∏—Å–∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ. –í —Ü–∏–∫–ª–µ —ç—Ç–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞.

**Q: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–º–µ—Ä–æ–º > RAM?**

A: –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (streaming) - —á–∏—Ç–∞–π—Ç–µ –ø–æ —á–∞—Å—Ç—è–º, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ü–µ–ª–∏–∫–æ–º.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å `std::string` –±–∏–Ω–∞—Ä–Ω–æ?**

A: –ù–∞–ø—Ä—è–º—É—é –Ω–µ–ª—å–∑—è (—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ heap)! –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –¥–ª–∏–Ω—É + –¥–∞–Ω–Ω—ã–µ:
```cpp
size_t len = s.length();
file.write(reinterpret_cast<char*>(&len), sizeof(len));
file.write(s.data(), len);
```

**Q: –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤?**

A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Protocol Buffers, FlatBuffers –∏–ª–∏ Cap'n Proto - –æ–Ω–∏ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã endianness –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ö–Ω–∏–≥–∏
- **"The C++ Standard Library" by Nicolai M. Josuttis** - –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ iostream
- **"Effective Modern C++" by Scott Meyers** - best practices
- **"Database Internals" by Alex Petrov** - –∫–∞–∫ –ë–î —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ñ–∞–π–ª–∞–º–∏

### –°—Ç–∞—Ç—å–∏
- [Linux AIO vs io_uring](https://kernel.dk/io_uring.pdf)
- [RocksDB Architecture](https://github.com/facebook/rocksdb/wiki/Architecture-Guide)
- [SQLite File Format](https://www.sqlite.org/fileformat.html)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **strace** (Linux) - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **perf** - –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ I/O
- **Valgrind** - –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–µ—á–µ–∫ —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç —É—á–µ–±–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.

---

**–ê–≤—Ç–æ—Ä:** AI Assistant (Claude Sonnet)  
**–î–∞—Ç–∞:** 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

–£–¥–∞—á–∏ –≤ –∏–∑—É—á–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞! üöÄ


