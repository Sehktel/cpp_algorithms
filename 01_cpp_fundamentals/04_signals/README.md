# –¢–µ–º–∞ 4: –ü–µ—Ä–µ—Ö–≤–∞—Ç –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ C++

## üìö –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏–≥–Ω–∞–ª—ã - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ Unix-–ø–æ–¥–æ–±–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:
- –°–æ–∑–¥–∞–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤—ã—Ö –∫ –∞—Ç–∞–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ graceful shutdown –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–µ–∫–∞)
- –ê–Ω–∞–ª–∏–∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ

## üéØ –¶–µ–ª–∏ –æ–±—É—á–µ–Ω–∏—è

- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ Unix/Linux
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ C++
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

## üîó –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–µ–º–∞–º–∏

### –ü—Ä–µ–¥—ã–¥—É—â–∏–µ —Ç–µ–º—ã
- [–¢–µ–º–∞ 3: Shared libraries](../03_shared_libraries/) - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö

### –°–ª–µ–¥—É—é—â–∏–µ —Ç–µ–º—ã
- [–¢–µ–º–∞ 8: TCP Client-Server](../../02_networking/08_tcp_client_server/) - —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è graceful shutdown (SIGTERM, SIGINT)
- [–¢–µ–º–∞ 9: GDB –æ—Ç–ª–∞–¥–∫–∞](../../03_debugging_analysis/09_gdb_disasm/) - GDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (SIGTRAP)
- [–¢–µ–º–∞ 12: strace/ltrace](../../03_debugging_analysis/12_strace_ltrace/) - –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏
- [–¢–µ–º–∞ 15: Kernel modules](../../05_kernel/15_kernel_module/) - –º–æ–¥—É–ª–∏ —è–¥—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–∏–≥–Ω–∞–ª—ã –æ—Ç –¥—Ä–∞–π–≤–µ—Ä–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã

```
04_signals/
‚îú‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ sighup_ignorer.cpp          # –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ SIGHUP –∏ SIGINT
‚îî‚îÄ‚îÄ examples/                    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
    ‚îú‚îÄ‚îÄ signal_handling_advanced.cpp
    ‚îî‚îÄ‚îÄ multi_thread_signals.cpp
```

## üöÄ –ó–∞–ø—É—Å–∫

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è

```bash
# Linux/macOS
g++ -std=c++11 -Wall -Wextra sighup_ignorer.cpp -o sighup_ignorer

# Windows (MinGW)
g++ -std=c++11 -Wall -Wextra sighup_ignorer.cpp -o sighup_ignorer.exe
```

### –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
./sighup_ignorer

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞
kill -HUP <PID>  # –û—Ç–ø—Ä–∞–≤–∏—Ç—å SIGHUP
# –∏–ª–∏
kill -INT <PID>  # –û—Ç–ø—Ä–∞–≤–∏—Ç—å SIGINT (Ctrl+C)
```

## üìñ –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã:**
- `SIGKILL` (9) - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å
- `SIGTERM` (15) - –∑–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
- `SIGINT` (2) - –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ (Ctrl+C), –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å

**–°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã:**
- `SIGHUP` (1) - hangup, —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `SIGUSR1` (10), `SIGUSR2` (12) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã

**–û—à–∏–±–∫–∏:**
- `SIGSEGV` (11) - –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ (segmentation fault)
- `SIGBUS` (7) - –æ—à–∏–±–∫–∞ —à–∏–Ω—ã
- `SIGFPE` (8) - –æ—à–∏–±–∫–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞:**
   - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å ‚Üí SIGFPE)
   - –î—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º (—á–µ—Ä–µ–∑ `kill()`)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (Ctrl+C ‚Üí SIGINT)

2. **–î–æ—Å—Ç–∞–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞:**
   - –°–∏–≥–Ω–∞–ª —Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–∞

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `signal()` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–±)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sigaction()` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–∏–≥–Ω–∞–ª—ã

**–ü—Ä–æ–±–ª–µ–º—ã:**
- Race conditions –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–∏—Ä–æ–¥–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –º–æ–∂–µ—Ç –ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è signal-safe

**Best practices:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sigaction()` –≤–º–µ—Å—Ç–æ `signal()`
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–∏–≥–Ω–∞–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥–∏ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –∏ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–¥–æ–º
- –ò–∑–±–µ–≥–∞—Ç—å –≤—ã–∑–æ–≤–∞ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

## üõ† –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### –ü—Ä–∏–º–µ—Ä: sighup_ignorer.cpp

–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∫—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è SIGHUP –∏ SIGINT
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
```cpp
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
signal(SIGHUP, sighup_handler);

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–∞
void sighup_handler(int signum) {
    std::cout << "–ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª " << signum << std::endl;
    // –í–ê–ñ–ù–û: –ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ!
}
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:**
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ SIGTERM

2. **–°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ–Ω-–ø—Ä–æ—Ü–µ—Å—Å:**
   - –û—Ç—Å–æ–µ–¥–∏–Ω–∏—Ç—å –æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å SIGHUP –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PID —Ñ–∞–π–ª

3. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Å–∏–≥–Ω–∞–ª—ã:**
   - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pthread_sigmask()` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

## üîç –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –ü–æ—á–µ–º—É `signal()` —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º? –í —á–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `sigaction()`?
2. –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–∏–≥–Ω–∞–ª–æ–≤?
3. –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏–≥–Ω–∞–ª –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?
4. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É SIGTERM –∏ SIGKILL? –ü–æ—á–µ–º—É SIGKILL –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å?
5. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ graceful shutdown —Å–µ—Ä–≤–µ—Ä–∞?

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [signal(7) - Linux manual page](https://man7.org/linux/man-pages/man7/signal.7.html)
- [sigaction(2) - Linux manual page](https://man7.org/linux/man-pages/man2/sigaction.2.html)
- [Signal Safety](https://man7.org/linux/man-pages/man7/signal-safety.7.html)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `cpp_base/sighup_ignorer.cpp` (legacy)  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025

